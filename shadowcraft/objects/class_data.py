from shadowcraft.core import exceptions

class Util(object):
# This should have its own GameClass(object) architecture at some point.

    GAME_CLASS_NUMBER = {
        1:"warrior", 2:"paladin", 3:"hunter", 4:"rogue",
        5:"priest", 6:"death_knight", 7:"shaman", 8:"mage", 9:"warlock",
        10:"monk", 11:"druid"
    }
    
    #SimC keeps their enchant scale data here: https://code.google.com/p/simulationcraft/source/browse/engine/dbc/sc_scale_data.inc#342
    #these, however, are the trinket scale data
    RANDOM_PROP_POINTS = [
[0, 0],
[1, 0],
[2, 0],
[3, 0],
[4, 0],
[5, 0],
[6, 0],
[7, 0],
[8, 0],
[9, 0],
[10, 9],
[11, 10],
[12, 11],
[13, 12],
[14, 12],
[15, 13],
[16, 14],
[17, 14],
[18, 15],
[19, 16],
[20, 16],
[21, 17],
[22, 18],
[23, 18],
[24, 19],
[25, 20],
[26, 20],
[27, 21],
[28, 22],
[29, 23],
[30, 23],
[31, 24],
[32, 25],
[33, 25],
[34, 26],
[35, 27],
[36, 27],
[37, 28],
[38, 29],
[39, 29],
[40, 30],
[41, 31],
[42, 32],
[43, 32],
[44, 33],
[45, 34],
[46, 34],
[47, 35],
[48, 36],
[49, 36],
[50, 37],
[51, 38],
[52, 38],
[53, 39],
[54, 40],
[55, 41],
[56, 41],
[57, 42],
[58, 43],
[59, 43],
[60, 44],
[61, 45],
[62, 45],
[63, 46],
[64, 47],
[65, 47],
[66, 48],
[67, 49],
[68, 50],
[69, 50],
[70, 50],
[71, 52],
[72, 52],
[73, 52],
[74, 53],
[75, 54],
[76, 55],
[77, 55],
[78, 56],
[79, 57],
[80, 57],
[81, 58],
[82, 59],
[83, 59],
[84, 60],
[85, 61],
[86, 61],
[87, 62],
[88, 63],
[89, 64],
[90, 64],
[91, 65],
[92, 66],
[93, 66],
[94, 66],
[95, 67],
[96, 67],
[97, 67],
[98, 68],
[99, 68],
[100, 68],
[101, 69],
[102, 69],
[103, 69],
[104, 70],
[105, 70],
[106, 71],
[107, 71],
[108, 72],
[109, 73],
[110, 73],
[111, 74],
[112, 75],
[113, 75],
[114, 76],
[115, 77],
[116, 78],
[117, 78],
[118, 79],
[119, 80],
[120, 80],
[121, 81],
[122, 82],
[123, 83],
[124, 84],
[125, 84],
[126, 85],
[127, 86],
[128, 87],
[129, 88],
[130, 88],
[131, 89],
[132, 90],
[133, 91],
[134, 92],
[135, 93],
[136, 93],
[137, 94],
[138, 95],
[139, 96],
[140, 97],
[141, 98],
[142, 99],
[143, 100],
[144, 101],
[145, 102],
[146, 103],
[147, 104],
[148, 104],
[149, 105],
[150, 106],
[151, 107],
[152, 108],
[153, 109],
[154, 111],
[155, 112],
[156, 113],
[157, 114],
[158, 115],
[159, 116],
[160, 117],
[161, 118],
[162, 119],
[163, 120],
[164, 121],
[165, 122],
[166, 124],
[167, 125],
[168, 126],
[169, 127],
[170, 128],
[171, 129],
[172, 131],
[173, 132],
[174, 133],
[175, 134],
[176, 136],
[177, 137],
[178, 138],
[179, 139],
[180, 141],
[181, 142],
[182, 143],
[183, 145],
[184, 146],
[185, 148],
[186, 149],
[187, 150],
[188, 152],
[189, 153],
[190, 155],
[191, 156],
[192, 157],
[193, 159],
[194, 160],
[195, 162],
[196, 163],
[197, 165],
[198, 167],
[199, 168],
[200, 170],
[201, 171],
[202, 173],
[203, 174],
[204, 176],
[205, 178],
[206, 179],
[207, 181],
[208, 183],
[209, 184],
[210, 186],
[211, 188],
[212, 190],
[213, 191],
[214, 193],
[215, 195],
[216, 197],
[217, 199],
[218, 201],
[219, 202],
[220, 204],
[221, 206],
[222, 208],
[223, 210],
[224, 212],
[225, 214],
[226, 216],
[227, 218],
[228, 220],
[229, 222],
[230, 224],
[231, 226],
[232, 229],
[233, 231],
[234, 233],
[235, 235],
[236, 237],
[237, 239],
[238, 242],
[239, 244],
[240, 246],
[241, 249],
[242, 251],
[243, 253],
[244, 256],
[245, 258],
[246, 260],
[247, 263],
[248, 265],
[249, 268],
[250, 270],
[251, 273],
[252, 275],
[253, 278],
[254, 281],
[255, 283],
[256, 286],
[257, 289],
[258, 291],
[259, 294],
[260, 297],
[261, 299],
[262, 302],
[263, 305],
[264, 308],
[265, 311],
[266, 314],
[267, 317],
[268, 320],
[269, 323],
[270, 326],
[271, 329],
[272, 332],
[273, 335],
[274, 338],
[275, 341],
[276, 344],
[277, 348],
[278, 351],
[279, 354],
[280, 357],
[281, 361],
[282, 364],
[283, 368],
[284, 371],
[285, 326],
[286, 329],
[287, 332],
[288, 335],
[289, 338],
[290, 341],
[291, 344],
[292, 348],
[293, 351],
[294, 354],
[295, 357],
[296, 361],
[297, 364],
[298, 368],
[299, 371],
[300, 375],
[301, 378],
[302, 382],
[303, 385],
[304, 389],
[305, 392],
[306, 396],
[307, 400],
[308, 404],
[309, 407],
[310, 411],
[311, 415],
[312, 419],
[313, 423],
[314, 427],
[315, 431],
[316, 435],
[317, 439],
[318, 443],
[319, 447],
[320, 451],
[321, 455],
[322, 460],
[323, 464],
[324, 468],
[325, 473],
[326, 477],
[327, 482],
[328, 486],
[329, 491],
[330, 495],
[331, 500],
[332, 505],
[333, 509],
[334, 514],
[335, 519],
[336, 524],
[337, 529],
[338, 534],
[339, 539],
[340, 544],
[341, 549],
[342, 554],
[343, 559],
[344, 564],
[345, 570],
[346, 575],
[347, 580],
[348, 586],
[349, 591],
[350, 597],
[351, 602],
[352, 608],
[353, 614],
[354, 619],
[355, 625],
[356, 631],
[357, 637],
[358, 643],
[359, 649],
[360, 655],
[361, 661],
[362, 667],
[363, 674],
[364, 680],
[365, 686],
[366, 693],
[367, 699],
[368, 706],
[369, 712],
[370, 719],
[371, 726],
[372, 733],
[373, 739],
[374, 746],
[375, 753],
[376, 760],
[377, 767],
[378, 775],
[379, 782],
[380, 789],
[381, 797],
[382, 804],
[383, 812],
[384, 819],
[385, 827],
[386, 835],
[387, 842],
[388, 850],
[389, 858],
[390, 866],
[391, 874],
[392, 883],
[393, 891],
[394, 899],
[395, 908],
[396, 916],
[397, 925],
[398, 933],
[399, 942],
[400, 951],
[401, 960],
[402, 969],
[403, 978],
[404, 987],
[405, 996],
[406, 1006],
[407, 1015],
[408, 1024],
[409, 1034],
[410, 1044],
[411, 1054],
[412, 1063],
[413, 1073],
[414, 1083],
[415, 1094],
[416, 1104],
[417, 1114],
[418, 1125],
[419, 1135],
[420, 1146],
[421, 1156],
[422, 1167],
[423, 1178],
[424, 1189],
[425, 1200],
[426, 1212],
[427, 1223],
[428, 1234],
[429, 1246],
[430, 1258],
[431, 1269],
[432, 1281],
[433, 1293],
[434, 1305],
[435, 1318],
[436, 1330],
[437, 1342],
[438, 1355],
[439, 1368],
[440, 1380],
[441, 1393],
[442, 1406],
[443, 1419],
[444, 1433],
[445, 1446],
[446, 1460],
[447, 1473],
[448, 1487],
[449, 1501],
[450, 1515],
[451, 1529],
[452, 1544],
[453, 1558],
[454, 1573],
[455, 1587],
[456, 1602],
[457, 1617],
[458, 1632],
[459, 1648],
[460, 1663],
[461, 1679],
[462, 1694],
[463, 1710],
[464, 1726],
[465, 1742],
[466, 1759],
[467, 1775],
[468, 1792],
[469, 1809],
[470, 1825],
[471, 1843],
[472, 1860],
[473, 1877],
[474, 1895],
[475, 1913],
[476, 1930],
[477, 1949],
[478, 1967],
[479, 1985],
[480, 2004],
[481, 2023],
[482, 2041],
[483, 2061],
[484, 2080],
[485, 2099],
[486, 2119],
[487, 2139],
[488, 2159],
[489, 2179],
[490, 2199],
[491, 2220],
[492, 2241],
[493, 2262],
[494, 2283],
[495, 2304],
[496, 2326],
[497, 2348],
[498, 2370],
[499, 2392],
[500, 2414],
[501, 2437],
[502, 2460],
[503, 2483],
[504, 2506],
[505, 2529],
[506, 2553],
[507, 2577],
[508, 2601],
[509, 2625],
[510, 2650],
[511, 2675],
[512, 2700],
[513, 2725],
[514, 2751],
[515, 2776],
[516, 2802],
[517, 2829],
[518, 2855],
[519, 2882],
[520, 2909],
[521, 2936],
[522, 2963],
[523, 2991],
[524, 3019],
[525, 3047],
[526, 3076],
[527, 3105],
[528, 3134],
[529, 3163],
[530, 3193],
[531, 3223],
[532, 3253],
[533, 3283],
[534, 3314],
[535, 3345],
[536, 3376],
[537, 3408],
[538, 3440],
[539, 3472],
[540, 3505],
[541, 3537],
[542, 3571],
[543, 3604],
[544, 3638],
[545, 3672],
[546, 3706],
[547, 3741],
[548, 3776],
[549, 3811],
[550, 3847],
[551, 3883],
[552, 3919],
[553, 3956],
[554, 3993],
[555, 4030],
[556, 4068],
[557, 4106],
[558, 4145],
[559, 4183],
[560, 4222],
[561, 4262],
[562, 4302],
[563, 4342],
[564, 4383],
[565, 4424],
[566, 4465],
[567, 180],
[568, 181],
[569, 182],
[570, 183],
[571, 184],
[572, 185],
[573, 186],
[574, 187],
[575, 189],
[576, 191],
[577, 193],
[578, 195],
[579, 197],
[580, 199],
[581, 201],
[582, 5183],
[583, 5232],
[584, 5281],
[585, 5330],
[586, 5380],
[587, 5430],
[588, 5481],
[589, 5532],
[590, 5584],
[591, 5637],
[592, 5689],
[593, 5743],
[594, 5796],
[595, 5851],
[596, 5905],
[597, 5961],
[598, 6016],
[599, 6073],
[600, 6130],
[601, 6187],
[602, 6245],
[603, 6303],
[604, 6362],
[605, 6422],
[606, 6482],
[607, 6543],
[608, 6604],
[609, 6666],
[610, 6728],
[611, 6791],
[612, 6855],
[613, 6919],
[614, 6984],
[615, 7049],
[616, 7115],
[617, 7182],
[618, 7249],
[619, 7317],
[620, 7385],
[621, 7454],
[622, 7524],
[623, 7594],
[624, 7666],
[625, 7737],
[626, 7810],
[627, 7883],
[628, 7957],
[629, 8031],
[630, 8106],
[631, 8182],
[632, 8259],
[633, 8336],
[634, 8414],
[635, 8493],
[636, 8572],
[637, 8653],
[638, 8734],
[639, 8815],
[640, 8898],
[641, 8981],
[642, 9065],
[643, 9150],
[644, 9236],
[645, 9322],
[646, 9410],
[647, 9498],
[648, 9587],
[649, 9676],
[650, 9767],
[651, 9858],
[652, 9951],
[653, 10044],
[654, 10138],
[655, 10233],
[656, 10328],
[657, 10425],
[658, 10523],
[659, 10621],
[660, 10721],
[661, 10821],
[662, 10922],
[663, 11025],
[664, 11128],
[665, 11232],
[666, 11337],
[667, 11443],
[668, 11550],
[669, 11658],
[670, 11768],
[671, 11878],
[672, 11989],
[673, 12101],
[674, 12214],
[675, 12329],
[676, 12444],
[677, 12561],
[678, 12678],
[679, 12797],
[680, 12917],
[681, 13038],
[682, 13160],
[683, 13283],
[684, 13407],
[685, 13533],
[686, 13659],
[687, 13787],
[688, 13916],
[689, 14047],
[690, 14178],
[691, 14311],
[692, 14445],
[693, 14580],
[694, 14716],
[695, 14854],
[696, 14993],
[697, 15134],
[698, 15275],
[699, 15418],
[700, 15563],
[701, 15708],
[702, 15855],
[703, 16004],
[704, 16154],
[705, 16305],
[706, 16457],
[707, 16611],
[708, 16767],
[709, 16924],
[710, 17082],
[711, 17242],
[712, 17404],
[713, 17567],
[714, 17731],
[715, 17897],
[716, 18064],
[717, 18234],
[718, 18404],
[719, 18577],
[720, 18750],
[721, 18926],
[722, 19103],
[723, 19282],
[724, 19462],
[725, 19645],
[726, 19829],
[727, 20014],
[728, 20202],
[729, 20391],
[730, 20581],
[731, 20774],
[732, 20969],
[733, 21165],
[734, 21363],
[735, 21563],
[736, 21765],
[737, 21969],
[738, 22174],
[739, 22382],
[740, 22591],
[741, 22803],
[742, 23016],
[743, 23232],
[744, 23449],
[745, 23669],
[746, 23890],
[747, 24114],
[748, 24340],
[749, 24567],
[750, 24797],
[751, 25030],
[752, 25264],
[753, 25500],
[754, 25739],
[755, 25980],
[756, 26223],
[757, 26469],
[758, 26716],
[759, 26967],
[760, 27219],
[761, 27474],
[762, 27731],
[763, 27991],
[764, 28253],
[765, 28517],
[766, 28784],
[767, 29053],
[768, 29325],
[769, 29600],
[770, 29877],
[771, 30157],
[772, 30439],
[773, 30724],
[774, 31012],
[775, 31302],
[776, 31595],
[777, 31891],
[778, 32189],
[779, 32491],
[780, 32795],
[781, 33102],
[782, 33412],
[783, 33724],
[784, 34040],
[785, 34359],
[786, 34680],
[787, 35005],
[788, 35333],
[789, 35663],
[790, 35997],
[791, 36334],
[792, 36674],
[793, 37018],
[794, 37364],
[795, 37714],
[796, 38067],
[797, 38423],
[798, 38783],
[799, 39146],
[800, 39512],
[801, 39882],
[802, 40256],
[803, 40632],
[804, 41013],
[805, 41397],
[806, 41784],
[807, 42175],
[808, 42570],
[809, 42969],
[810, 43371],
[811, 43777],
[812, 44187],
[813, 44600],
[814, 45018],
[815, 45439],
[816, 45865],
[817, 46294],
[818, 46727],
[819, 47165],
[820, 47606],
[821, 48052],
[822, 48502],
[823, 48956],
[824, 49414],
[825, 49877],
[826, 50343],
[827, 50815],
[828, 51290],
[829, 51771],
[830, 52255],
[831, 52744],
[832, 53238],
[833, 53736],
[834, 54239],
[835, 54747],
[836, 55260],
[837, 55777],
[838, 56299],
[839, 56826],
[840, 57358],
[841, 57895],
[842, 58437],
[843, 58984],
[844, 59536],
[845, 60093],
[846, 60656],
[847, 61224],
[848, 61797],
[849, 62375],
[850, 62959],
[851, 63549],
[852, 64143],
[853, 64744],
[854, 65350],
[855, 65962],
[856, 66579],
[857, 67202],
[858, 67832],
[859, 68467],
[860, 69107],
[861, 69754],
[862, 70407],
[863, 71066],
[864, 71732],
[865, 72403],
[866, 73081],
[867, 73765],
[868, 74456],
[869, 75153],
[870, 75856],
[871, 76566],
[872, 77283],
[873, 78006],
[874, 78737],
[875, 79474],
[876, 80218],
[877, 80968],
[878, 81726],
[879, 82491],
[880, 83264],
[881, 84043],
[882, 84830],
[883, 85624],
[884, 86425],
[885, 87234],
[886, 88051],
[887, 88875],
[888, 89707],
[889, 90547],
[890, 91395],
[891, 92250],
[892, 93114],
[893, 93985],
[894, 94865],
[895, 95753],
[896, 96650],
[897, 97554],
[898, 98467],
[899, 99389],
[900, 100320],
[901, 101259],
[902, 102207],
[903, 103163],
[904, 104129],
[905, 105104],
[906, 106088],
[907, 107081],
[908, 108083],
[909, 109095],
[910, 110116],
[911, 111147],
[912, 112187],
[913, 113238],
[914, 114298],
[915, 115368],
[916, 116447],
[917, 117538],
[918, 118638],
[919, 119748],
[920, 120869],
[921, 122001],
[922, 123143],
[923, 124296],
[924, 125459],
[925, 126634],
[926, 127819],
[927, 129015],
[928, 130223],
[929, 131442],
[930, 132673],
[931, 133915],
[932, 135168],
[933, 136433],
[934, 137711],
[935, 139000],
[936, 140301],
[937, 141614],
[938, 142940],
[939, 144278],
[940, 145629],
[941, 146992],
[942, 148368],
[943, 149757],
[944, 151159],
[945, 152574],
[946, 154002],
[947, 155443],
[948, 156899],
[949, 158367],
[950, 159850],
[951, 161346],
[952, 162856],
[953, 164381],
[954, 165920],
[955, 167473],
[956, 169041],
[957, 170623],
[958, 172220],
[959, 173832],
[960, 175460],
[961, 177102],
[962, 178760],
[963, 180433],
[964, 182122],
[965, 183827],
[966, 185548],
[967, 187285],
[968, 189038],
[969, 190808],
[970, 192594],
[971, 194397],
[972, 196216],
[973, 198053],
[974, 199907],
[975, 201779],
[976, 203667],
[977, 205574],
[978, 207498],
[979, 209441],
[980, 211401],
[981, 213380],
[982, 215378],
[983, 217394],
[984, 219429],
[985, 221483],
[986, 223556],
[987, 225649],
[988, 227761],
[989, 229893],
[990, 232045],
[991, 234217],
[992, 236410],
[993, 238623],
[994, 240857],
[995, 243111],
[996, 245387],
[997, 247684],
[998, 250003],
[999, 252343],
    ]
    
    def get_class_number(self, game_class):
        for i in self.GAME_CLASS_NUMBER.keys():
            if self.GAME_CLASS_NUMBER[i] == game_class:
                return i
        raise exceptions.InvalidInputException(_('{game_class} is not a supported game class').format(game_class=game_class))

    def get_agi_per_crit(self, game_class, level):
        return self.AGI_PER_CRIT_VALUES[self.get_class_number(game_class)][level - 1]

    def get_agi_intercept(self, game_class):
        return self.AGI_CRIT_INTERCEPT_VALUES[self.get_class_number(game_class)]

    def get_random_prop_point(self, item_level):
        if item_level < 1:
            raise exceptions.InvalidInputException(_('item_level={item_level} need to be >= 1').format(item_level=item_level))
        return self.RANDOM_PROP_POINTS[item_level][1]
    